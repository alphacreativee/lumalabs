import{preloadImages}from"../../libs/utils.js";let lenis;function initLenis(){lenis=new Lenis({duration:1.2,easing:e=>Math.min(1,1.001-Math.pow(2,-10*e)),smooth:!0}),requestAnimationFrame(function e(t){lenis.raf(t),requestAnimationFrame(e)}),lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{lenis.raf(1e3*e)})}function hero(){var e=document.querySelector(".hero"),t=document.querySelector(".hero-personas");let o=document.querySelector(".hero-wrapper__video");document.getElementById("header"),e.offsetHeight;gsap.to(".hero",{scrollTrigger:{trigger:".hero",start:"top top",end:"+=300%",scrub:1,pin:!0,pinSpacing:!1,markers:!0}}),gsap.to(o,{width:"80px",height:"40px",top:"calc(50% + 5px)",left:"50%",yPercent:50,xPercent:-50,borderRadius:"40px",ease:"none",scrollTrigger:{trigger:o,start:"top top",end:"+=150%",scrub:!0,pinSpacing:!1,onUpdate:e=>{e=e.progress.toFixed(2);gsap.to(o,{opacity:1==e?0:1,duration:.3})}}}),gsap.fromTo(".hero-wrapper__bg .bg-item.active",{opacity:0},{opacity:1,ease:"none",scrollTrigger:{trigger:o,start:"top top",end:"+=150%",scrub:!0}}),gsap.to(".hero",{backgroundColor:"#B9BABA",ease:"none",scrollTrigger:{trigger:o,start:"top top",end:"+=150%",scrub:!0}}),gsap.to(".item-ovl",{width:"calc(100vw - 40px)",height:"calc(100vh - 140px)",duration:.8,delay:1,zIndex:2,top:"20px",yPercent:0,ease:"none",onUpdate:function(){var e=this.progress();.01<=e&&(document.querySelector(".hero-switcher .list-item").style.opacity=0),.8<=e&&gsap.to(".hero-switcher .item-ovl",{opacity:0,duration:.5,ease:"none"}),.8<=e&&(document.querySelector("#header").classList.remove("loading"),document.querySelector(".hero-switcher .list-item").style.opacity=1),1==e&&(document.querySelector(".hero-switcher").classList.remove("loading"),document.querySelector(".hero").classList.remove("loading"))}}),gsap.to(".item-ovl",{width:"calc(100vw - 40px)",height:"calc(100vh - 140px)",duration:.8,delay:1,zIndex:2,top:"20px",yPercent:0,ease:"none",onUpdate:function(){var e=this.progress();.01<=e&&(document.querySelector(".hero-switcher .list-item").style.opacity=0),.8<=e&&document.querySelector("#header").classList.remove("loading"),1==e&&(document.querySelector(".hero-switcher").classList.remove("loading"),document.querySelector(".hero").classList.remove("loading"),setTimeout(()=>{document.querySelector(".hero-switcher .list-item").style.opacity=1},.3))}}),gsap.registerPlugin(ScrollTrigger),gsap.fromTo("#header",{top:"100%",yPercent:-100,opacity:1},{top:0,yPercent:0,ease:"none",scrollTrigger:{trigger:"body",start:"top top",end:"50% top",scrub:!0,pinSpacing:!1,onUpdate:e=>{var e=e.progress.toFixed(2),t=document.getElementById("header");gsap.to(t,{opacity:e<.1?1:e<=.2?1-10*(e-.1):e<.99?0:1}),t.classList.toggle("header--fixed",.9<=e),document.querySelector(".hero-switcher").classList.toggle("active",1==e),document.querySelector(".hero-gradient").classList.toggle("active",1==e)}}}),gsap.timeline({scrollTrigger:{trigger:".item-ovl",start:"top center",toggleActions:"play none none none",onUpdate:e=>{.8<=e.progress&&(document.querySelector("#header").classList.remove("loading"),document.querySelector(".hero-switcher").classList.remove("loading"))}}}).to(".item-ovl",{width:"calc(100vw - 40px)",height:"calc(100vh - 140px)",duration:.8,delay:1,top:"20px",yPercent:0,ease:"none"}).to(".item-ovl",{opacity:0,duration:.3,ease:"none"},"-=0.24");let r=document.querySelectorAll(".hero-switcher .item");r.forEach(e=>{e.addEventListener("click",function(){this.classList.contains("active")||(r.forEach(e=>e.classList.remove("active")),this.classList.add("active"))})}),gsap.to(t,{scale:.52,ease:"none",scrollTrigger:{trigger:o,start:"top top",end:"+=150%",scrub:!0,pinSpacing:!1,onUpdate:e=>{1==e.progress.toFixed(2)?document.querySelector(".hero").classList.add("done-video"):document.querySelector(".hero").classList.remove("done-video")}}}),ScrollTrigger.refresh()}function parallaxIt(e,t,o){var r=t.getBoundingClientRect(),a=e.clientX-r.left;gsap.to(t,{duration:.3,x:(a/r.width-.5)*o,y:((e.clientY-r.top)/r.height-.5)*o,ease:"power2.out"})}function callParallax(e){var t=e.currentTarget,o=t.querySelector("img"),r=t.querySelector("span");parallaxIt(e,t,10),o&&parallaxIt(e,o,20),r&&parallaxIt(e,r,15)}function hoverIcon(){var e=document.querySelectorAll(".hero-switcher .list-item .item"),t=document.querySelectorAll(".btn-large");e.forEach(t=>{t.addEventListener("mousemove",e=>{callParallax(e)}),t.addEventListener("mouseleave",()=>{gsap.to(t,{duration:.3,height:60,width:100,x:0,y:0,ease:"power2.out"});var e=t.querySelector("img");e&&gsap.to(e,{duration:.3,x:0,y:0,scale:1,ease:"power2.out"})}),t.addEventListener("mouseenter",()=>{var e=t.querySelector("img");e&&gsap.to(e,{duration:.3,scale:.9,ease:"power2.out"})})}),t.forEach(t=>{t.addEventListener("mousemove",e=>{callParallax(e)}),t.addEventListener("mouseleave",()=>{gsap.to(t,{duration:.3,x:0,y:0,ease:"power2.out"});var e=t.querySelector("span");e&&gsap.to(e,{duration:.3,x:0,y:0,scale:1,ease:"power2.out"})}),t.addEventListener("mouseenter",()=>{var e=t.querySelector("span");e&&gsap.to(e,{duration:.3,scale:.9,ease:"power2.out"})})})}Splitting();let init=()=>{initLenis(),hero(),hoverIcon(),window.addEventListener("resize",()=>{ScrollTrigger.refresh()})};preloadImages("img").then(()=>{document.body.classList.remove("loading"),init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});